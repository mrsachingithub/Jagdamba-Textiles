{% extends "base.html" %}

{% block content %}
<div style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);">
    <h1 style="font-family: var(--font-serif); margin-bottom: 2rem;">Shopping Cart</h1>

    {% if cart_items %}
    <table style="width: 100%; border-collapse: collapse; margin-bottom: 2rem;">
        <thead>
            <tr style="border-bottom: 2px solid #eee; text-align: left;">
                <th style="padding: 1rem;">Product</th>
                <th style="padding: 1rem;">Price</th>
                <th style="padding: 1rem;">Quantity</th>
                <th style="padding: 1rem;">Subtotal</th>
                <th style="padding: 1rem;">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 1rem;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <img src="{{ item.variant.image_url }}" alt=""
                            style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">
                        <div>
                            <strong>{{ item.variant.product.name }}</strong><br>
                            <small style="color: #666;">{{ item.variant.color_name }}</small>
                        </div>
                    </div>
                </td>
                <td style="padding: 1rem;">₹{{ item.variant.product.base_price }}</td>
                <td style="padding: 1rem;">
                    <form action="{{ url_for('cart.update_cart') }}" method="post"
                        style="display: inline-flex; align-items: center;">
                        <input type="hidden" name="variant_id" value="{{ item.variant.id }}">
                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1"
                            onchange="this.form.submit()" style="width: 60px; padding: 0.3rem;">
                    </form>
                </td>
                <td style="padding: 1rem;">₹{{ item.subtotal }}</td>
                <td style="padding: 1rem;">
                    <a href="{{ url_for('cart.remove_from_cart', variant_id=item.variant.id) }}" style="color: red;"><i
                            class="fas fa-trash"></i></a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="display: flex; justify-content: flex-end; align-items: flex-end; flex-direction: column;">
        <h2 style="margin-bottom: 1rem;">Total: ₹{{ total_amount }}</h2>
        <a href="{{ url_for('cart.checkout') }}" class="btn btn-primary">Proceed to Checkout</a>
    </div>
    {% else %}
    <p style="text-align: center; font-size: 1.2rem; padding: 3rem;">Your cart is empty. <a
            href="{{ url_for('main.shop') }}" style="color: var(--accent-color);">Start Shopping</a></p>
    {% endif %}
</div>
{% endblock %}